name: Build Kernel
on: push

jobs:
  build:
    name: Build Kernel by ${{ github.actor }}
    runs-on: ubuntu-latest
    steps:
    - name: Set swap to 10G
      uses: pierotofy/set-swap-space@master
      with:
        swap-size-gb: 10

    - name: Build kernel
      run: |
        mkdir ~/bin
        curl https://storage.googleapis.com/git-repo-downloads/repo > ~/bin/repo
        chmod a+x ~/bin/repo
        export PATH=~/bin:$PATH
        git clone https://github.com/oops-yu/test
        mkdir kernel 
        cd kernel
        repo init -u https://android.googlesource.com/kernel/manifest
        mv ../test/my.xml ./.repo/manifests/my.xml
        repo init -m my.xml
        repo sync -j8 
        LTO=thin BUILD_CONFIG=common/build.config.gki.aarch64 build/build.sh




    

    

    